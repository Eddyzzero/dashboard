<div class="min-h-screen bg-base-100/50">
    <ng-container *ngIf="isAuthPage(); else authenticatedLayout">
        <!-- Layout pour les pages d'authentification -->
        <div class="flex min-h-screen">

            <!-- Section droite : Formulaire d'authentification -->
            <div class="w-full  flex items-center justify-center bg-base-100">
                <div class="w-full">
                    <!-- Zone du formulaire -->
                    <div class="card bg-base-200">
                        <div class="card-body">
                            <router-outlet></router-outlet>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </ng-container>

    <!-- Template pour le layout authentifié -->
    <ng-template #authenticatedLayout>
        <div class="flex ">
            <!-- Sidebar Navigation -->
            <app-nav class="shrink-0"></app-nav>

            <!-- Zone de contenu principal -->
            <div class="grow min-h-screen transition-all duration-300">

                <!-- Topbar -->
                <header class="sticky top-0 z-30 bg-base-100/80 backdrop-blur-md border-b border-base-200">
                    <div class="flex items-center justify-between px-4 lg:px-8 h-16">
                        <div class="flex items-center gap-4">
                            <button class="btn btn-circle lg:hidden" (click)="toggleNav()"
                                aria-label="Toggle Navigation">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M4 6h16M4 12h16m-7 6h7" />
                                </svg>
                            </button>
                            <h1 class="text-xl font-semibold">{{ getCurrentPageTitle() }}</h1>
                        </div>

                        <div class="flex items-center gap-6">
                            <!-- Actions rapides -->
                            <div class="flex items-center gap-4">
                                <div>
                                    <a routerLink="/transactions/new" class="btn btn-primary btn-sm"
                                        (click)="toggleQuickAdd()"> Ajouter nouvelle
                                        transaction</a>
                                </div>
                            </div>

                            <!-- Bouton de changement de thème -->
                            <div class="">
                                <button class="btn btn-ghost btn-circle" (click)="theme.toggleTheme()"
                                    [attr.aria-label]="theme.isDarkMode() ? 'Passer au mode clair' : 'Passer au mode sombre'"
                                    title="Changer le thème">
                                    @if (theme.isDarkMode()) {
                                    <span class="material-symbols-outlined">
                                        light_mode
                                    </span>
                                    } @else {
                                    <span class="material-symbols-outlined">
                                        bedtime
                                    </span>
                                    }
                                </button>
                            </div>
                        </div>
                    </div>
                </header>



                <!-- Zone de contenu scrollable -->
                <main class="p-4 lg:p-8">
                    <div class="max-w-7xl mx-auto">
                        <!-- Notifications -->
                        <app-notifications class="mb-4"></app-notifications>

                        <!-- Contenu de la page -->
                        <router-outlet></router-outlet>
                    </div>
                </main>
            </div>
        </div>
    </ng-template>
</div>